import{r as n,B as c,N as h,E as s,c as l,Q as i,R as u,T as f,A as m,G as _}from"./index-BjIKEqiH.js";import{_ as p}from"./TextInput-DOdbCMPI.js";import{L as b}from"./LargeButton-B99SLnUj.js";import"./VTextField-QYsDKkgX.js";import"./transition-D3RRR1gk.js";import"./VInput-B-AyeEKI.js";import"./elevation-ClR-Unkx.js";import"./index-BKArx8Ql.js";const k={class:"wrapper"},y=s("h2",null,"Дла продолжения работы вам необходимо пройти авторизацию",-1),w=s("h3",null,"Введите логин",-1),V=s("h3",null,"Введите пароль",-1),j={__name:"UserAuth",setup(v){let o=n(""),r=n("");const d=async()=>{const a="https://114489bc2b841e30.mokky.dev/auth";try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.value,password:r.value})});if(!e.ok)throw new Error("Ошибка авторизации");const t=await e.json();localStorage.setItem("token",t.token),m.commit("setToken",t.token),m.dispatch("getEmployees"),_.push("./")}catch(e){console.error("Ошибка авторизации:",e)}};return(a,e)=>(c(),h("div",k,[s("form",{onSubmit:f(d,["prevent"])},[y,w,l(p,{required:!0,modelValue:i(o),"onUpdate:modelValue":e[0]||(e[0]=t=>u(o)?o.value=t:o=t),label:"Введите логин"},null,8,["modelValue"]),V,l(p,{required:!0,modelValue:i(r),"onUpdate:modelValue":e[1]||(e[1]=t=>u(r)?r.value=t:r=t),label:"Введите пароль"},null,8,["modelValue"]),l(b,{type:a.submit,buttonText:"Зайти в систему!",required:!0},null,8,["type"])],32)]))}};export{j as default};
